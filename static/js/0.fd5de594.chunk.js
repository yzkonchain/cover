(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[0],{274:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var a=n(23),c=n(31),o=n(28),i=n(0),s=n(20),r=n(106),l=n(6),b=o.a.constants.Zero,d={bond:b,want:b,I:{bond:"",want:""},old:{bond:"",want:""}},j=function(t,e){return o.a.utils.formatUnits(t,e||18)},u=function(t,e){return o.a.utils.parseUnits(t||"0",e||18)};function f(){Object(i.useContext)(s.d).state.controller;var t=Object(i.useContext)(s.e),e=t.liteState,n=e.pool,o=e.bond,f=e.want,h=(e.coll,e.data),x=t.classesChild,O=t.handleClick,w=Object(i.useReducer)((function(t,e){return Object(a.a)(Object(a.a)({},t),e)}),d),p=Object(c.a)(w,2),m=p[0],y=p[1],v=Object(i.useState)(!0),g=Object(c.a)(v,2),k=g[0],I=g[1],S=Object(i.useState)(""),C=Object(c.a)(S,2),_=C[0],q=C[1];return Object(i.useEffect)((function(){return m==d||y(d)}),[n]),Object(i.useEffect)((function(){var t=u(m.I.bond),e=u(m.I.want);t.eq(m.bond)?e.eq(m.want)||y({bond:e,want:e,I:Object(a.a)(Object(a.a)({},m.I),{},{bond:j(e)})}):n.ct.get_dy(t).then((function(e){q(""),y({bond:t,want:e,I:Object(a.a)(Object(a.a)({},m.I),{},{want:j(e)})})})).catch((function(){q("Insufficient Liquidity"),y({bond:b,want:b})}))}),[m.I]),Object(i.useMemo)((function(){return Object(l.jsxs)("div",{className:x.root,children:[Object(l.jsxs)("div",{className:x.amount,children:[Object(l.jsx)("div",{children:k?Object(l.jsx)(r.a,{title:"bond",State:{state:m,setState:y,token:o,max:h.balance.bond,if_max:h.balance.bond.gt("0")},style:{height:"50px"}}):Object(l.jsx)(r.a,{title:"want",State:{state:m,setState:y,token:f,max:h.balance.want,if_max:h.balance.want.gt("0")},style:{height:"50px"}})}),Object(l.jsx)("span",{className:x.icon_arrow,onClick:function(){I(!k),y(d)},children:"swap_horiz"}),k?Object(l.jsx)(r.a,{title:"want",State:{state:m,setState:y,token:f,max:h.balance.want,if_max:h.balance.want.gt("0")},style:{height:"50px"}}):Object(l.jsx)(r.a,{title:"bond",State:{state:m,setState:y,token:o,max:h.balance.bond,if_max:h.balance.bond.gt("0")},style:{height:"50px"}})]}),Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(l.jsx)("div",{style:{fontFamily:"Helvetica",fontSize:"14px",color:"red"},children:_}),Object(l.jsx)(r.b,{apy:parseFloat(h.apy).toPrecision(3),info:"APY is the fixed-rate lending interest received by \n          lender. This is the total cost for the 2-year-duration\n          loan. When lender exits before the expiry date, the\n          interest earned for the remainder of the loan at that\n          moment will be deducted in COLLAR.\n          "})]}),Object(l.jsx)("div",{className:x.button,children:k?Object(l.jsx)("div",{children:h.allowance.bond.gt("100000000000000000000000000000000")||!n.ct.signer?Object(l.jsx)(r.e,{name:"Borrow",onClick:function(){return O("borrow")(m.bond,m.want).then((function(){return y({I:{bond:"",want:""}})}))},disabled:b.eq(m.want)||h.allowance.bond.lt("100000000000000000000000000000000")}):Object(l.jsx)(r.e,{name:"Approve",onClick:function(){return O("approve")(o)}})}):Object(l.jsx)("div",{children:h.allowance.want.gt("100000000000000000000000000000000")||!n.ct.signer?Object(l.jsx)(r.e,{name:"Repay",onClick:function(){return O("repay")(m.want).then((function(){return y({I:{bond:"",want:""}})}))},disabled:b.eq(m.bond)||h.allowance.want.lt("100000000000000000000000000000000")}):Object(l.jsx)(r.e,{name:"Approve",onClick:function(){return O("approve")(f)}})})})]})}),[m,h,k,_])}}}]);