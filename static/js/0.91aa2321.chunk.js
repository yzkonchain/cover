(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[0],{258:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var u=n(15),j=n(22),a=n(17),f=n(0),h=n(12),O=n(85),x=n(3),w=a.ethers.constants.Zero,p={bond:w,want:w,I:{bond:"",want:""},old:{bond:"",want:""}},m=function(e,t){return a.ethers.utils.formatUnits(e,t||18)},v=function(e,t){return a.ethers.utils.parseUnits(e||"0",t||18)};function c(){Object(f.useContext)(h.d).state.controller;var e=Object(f.useContext)(h.e),t=e.liteState,n=t.pool,a=t.bond,c=t.want,i=(t.coll,t.data),o=e.classesChild,s=e.handleClick,e=Object(f.useReducer)(function(e,t){return Object(u.a)(Object(u.a)({},e),t)},p),e=Object(j.a)(e,2),r=e[0],b=e[1],e=Object(f.useState)(""),e=Object(j.a)(e,2),l=e[0],d=e[1];return Object(f.useEffect)(function(){return r==p||b(p)},[n]),Object(f.useEffect)(function(){var t=v(r.I.bond),e=v(r.I.want);t.eq(r.bond)?e.eq(r.want)||(b({bond:e,want:e,I:Object(u.a)(Object(u.a)({},r.I),{},{bond:m(e)})}),e.gt(i.balance.want)&&d("Insufficient Balance")):n.ct.get_dy(t).then(function(e){d(""),b({bond:t,want:e,I:Object(u.a)(Object(u.a)({},r.I),{},{want:m(e)})}),t.gt(i.balance.bond)&&d("Insufficient Balance")}).catch(function(){d("Insufficient Liquidity"),b({bond:w,want:w})})},[r.I]),Object(f.useMemo)(function(){return Object(x.jsxs)("div",{className:o.root,children:[Object(x.jsxs)("div",{className:o.amount,children:[Object(x.jsx)("div",{children:Object(x.jsx)(O.a,{title:"bond",State:{state:r,setState:b,token:a,max:i.balance.bond,if_max:i.balance.bond.gt("0")},style:{height:"50px"}})}),Object(x.jsx)("span",{className:o.icon_arrow,children:"navigate_next"}),Object(x.jsx)(O.b,{title:"want",State:{state:r,token:c,max:i.balance.want},style:{height:"50px"}})]}),Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(x.jsx)("div",{style:{fontFamily:"Helvetica",fontSize:"14px",color:"red"},children:l}),Object(x.jsx)(O.c,{apy:parseFloat(i.apy).toPrecision(3),info:"APY is the fixed-rate lending interest received by\n          lender. This is the total cost for the 2-year-duration\n          loan. When lender exits before the expiry date, the\n          interest earned for the remainder of the loan at that\n          moment will be deducted in COLLAR.\n          "})]}),Object(x.jsx)("div",{className:o.button,children:Object(x.jsx)("div",{children:i.allowance.bond.gt("100000000000000000000000000000000")||!n.ct.signer?Object(x.jsx)(O.f,{name:"Borrow",onClick:function(){return s("borrow")(r.bond,r.want).then(function(){return b({I:{bond:"",want:""}})})},disabled:w.eq(r.want)}):Object(x.jsx)(O.f,{name:"Approve",onClick:function(){return s("approve")(a)}})})})]})},[r,i,l])}}}]);